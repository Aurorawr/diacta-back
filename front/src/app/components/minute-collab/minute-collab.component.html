<div>
    <mat-card class="minute-collab-card">
        <mat-card-title>
            <h1 class='inline-block title'><b>Acta en desarrollo</b></h1>
        </mat-card-title>
        <mat-card-content>
            <div *ngIf="minute" class='padding-2r'>
                <div *ngIf='minute.header'>
                    <div>
                        <h2 class='inline-block'>Encabezado</h2>
                        <button class='edit-button' mat-icon-button color="primary" (click)='switchEdit("header")' [disabled]='externalEditions.header.editing'>
                            <mat-icon *ngIf='!localEditions.header'>edit</mat-icon>
                            <mat-icon *ngIf='localEditions.header'>edit_off</mat-icon>
                        </button>
                        <h3 *ngIf='externalEditions.header.editing' class='inline-block'>El usuario {{externalEditions.header.editorName}} está editando este campo...</h3>
                    </div>
                    <p *ngIf='!localEditions.header' class='minute-text'>{{ minute.header }}</p>
                    <div *ngIf='localEditions.header' class='align-right'>
                        <mat-form-field appearance="standard" class='full-width'>
                            <textarea #headerInput matInput cdkTextareaAutosize [(ngModel)]='minute.header' (keyup)='editBasicData("header", $event)'></textarea>
                        </mat-form-field>
                        <button mat-icon-button color="primary" (click)='switchEdit("header")'>
                            <mat-icon>edit_off</mat-icon>
                        </button>
                    </div>
                </div>
                <h3 class="info-text">{{getMinuteDatePlaceData}}</h3>
                <div *ngIf='minute.description'>
                    <div>
                        <h2 class='inline-block'>Descripción</h2>
                        <button class='edit-button' mat-icon-button color="primary" (click)='switchEdit("description")' [disabled]='externalEditions.description.editing'>
                            <mat-icon *ngIf='!localEditions.description'>edit</mat-icon>
                            <mat-icon *ngIf='localEditions.description'>edit_off</mat-icon>
                        </button>
                        <h3 *ngIf='externalEditions.description.editing' class='inline-block'>El usuario {{externalEditions.description.editorName}} está editando este campo...</h3>
                    </div>
                    <p *ngIf='!localEditions.description' class='minute-text'>{{ minute.description }}</p>
                    <div *ngIf='localEditions.description' class='align-right'>
                        <mat-form-field appearance="standard" class='full-width'>
                            <textarea #headerInput matInput cdkTextareaAutosize [(ngModel)]='minute.description' (keyup)='editBasicData("description", $event)'></textarea>
                        </mat-form-field>
                        <button mat-icon-button color="primary" (click)='switchEdit("description")'>
                            <mat-icon>edit_off</mat-icon>
                        </button>
                    </div>
                </div>
                <h1>Asistentes</h1>
                <mat-list>
                    <mat-list-item *ngFor="let participant of minute.participants">{{participant.user.name}} ({{participant.user.email}})</mat-list-item>
                </mat-list>
                <h1>Compromisos previos</h1>
                <p *ngIf='!minute.previousCompromises.length' class='minute-text'>No hay compromisos previos</p>
                <div *ngIf='minute.previousCompromises.length'>
                    <h4 *ngFor="let compromise of minute.previousCompromises; let i = index">{{i+1}}. {{compromise.content}}</h4>
                </div>
                <h1>Tabla de la reunión</h1>
                <mat-list>
                    <mat-list-item *ngFor="let topic of minute.topics">{{topic.enum}}. {{topic.name}}</mat-list-item>
                </mat-list>
                <h1>Desarrollo</h1>
                <div *ngFor="let topic of minute.topics">
                    <h2>{{topic.enum}}. {{topic.name}}</h2>
                    <p *ngIf='topic.description' class='minute-text'>{{topic.description}}</p>
                    <p *ngFor='let note of topic.notes' class='minute-text'>{{note.content}}</p>
                    <p *ngFor='let diaEl of topic.dialogueElements' class='minute-text'><b>{{diaEl.elementType}} {{minute.enum}}.{{diaEl.enum}}:</b> {{diaEl.content}}</p>
                </div>
                <h1>Adjuntos</h1>
                <mat-list>
                    <mat-list-item *ngFor='let annex of minute.annexes' class="full-width">
                        <mat-icon matListIcon>assignment</mat-icon>
                        <p matLine>{{ annex.name }}</p>
                        <p matLine><a href="{{annex.url}}" target="_blank">Link</a></p>
                        <button mat-icon-button>
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-list-item>
                </mat-list>
                <h3 *ngIf="minute.endTime" class="info-text"><b>Hora de término:</b> {{minute.endTime}}</h3>
            </div>
        </mat-card-content>
    </mat-card>
</div>